<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Law building AR Hunt</title>
  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <style>
    body { margin:0; overflow:hidden; }
    #checkin { display:none; position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
               padding: 10px 20px; font-size: 18px; background: #0078d7; color: white; border-radius: 8px; border: none; cursor: pointer; z-index: 10; }
    #hint { position: absolute; top: 12px; left: 12px; color: white; z-index: 10; font-weight:600; }
  </style>
</head>
<body>
  <div id="hint">Point camera at the Law building marker</div>
  <button id="checkin">Check-in</button>

  <a-scene embedded arjs='sourceType: webcam;'>
    <a-marker type="pattern" url="markers/Lawbuilding.patt" id="marker-Lawbuilding"
              data-marker-name="Law building"
              data-checkin-url="https://padlet.com/roxloon777/campus-hunt-wall-of-fame-gkek97r08b9p9047">
      <a-cone position="0 0.4 0"></a-cone>
      <a-text value="Law building" position="0 1 0" align="center"></a-text>
    </a-marker>
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    const btn = document.getElementById('checkin');
    const marker = document.getElementById('marker-Lawbuilding');
    let url = marker.getAttribute('data-checkin-url');
    let locName = "Law building";

    marker.addEventListener('markerFound', () => {
      btn.style.display = 'block';
      btn.textContent = "Check-in: " + locName;
    });
    marker.addEventListener('markerLost', () => {
      btn.style.display = 'none';
    });

    btn.addEventListener('click', () => {
      localStorage.setItem(locName, "true");
      window.open(url, '_blank');
    });
  </script>
</body>
</html>
